# ==============================================
# ETRAINER BACKEND - SCALABILITY CONFIGURATION
# ==============================================

# Server Configuration
NODE_ENV=production
PORT=8080
ENABLE_CLUSTERING=true
WORKER_COUNT=4

# MongoDB Atlas Configuration (Primary)
MONGODB_ATLAS_URI=mongodb+srv://username:password@cluster.mongodb.net/etrainer?retryWrites=true&w=majority
MONGODB_ATLAS_USER=your_atlas_username
MONGODB_ATLAS_PASSWORD=your_atlas_password
MONGODB_ATLAS_CLUSTER=your-cluster-name.mongodb.net
MONGODB_ATLAS_DATABASE=etrainer

# MongoDB Local Configuration (Fallback)
MONGODB_URI=mongodb://localhost:27017/etrainer
MONGODB_MAX_POOL_SIZE=20
MONGODB_MIN_POOL_SIZE=5

# Redis Configuration (for caching and sessions)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY_MS=100

# Cloudinary Configuration (Media Management)
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Firebase Configuration (Push Notifications)
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_PRIVATE_KEY_ID=your_private_key_id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nyour_private_key\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=your_service_account@your_project.iam.gserviceaccount.com
FIREBASE_CLIENT_ID=your_client_id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token

# JWT Configuration
JWT_SECRET=your_super_secure_jwt_secret_key_here
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_refresh_token_secret_here
JWT_REFRESH_EXPIRES_IN=30d

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8081,https://your-frontend-domain.com

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=10
STRICT_RATE_LIMIT_MAX=5
UPLOAD_RATE_LIMIT_MAX=20

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_SECRET=your_session_secret_here
HELMET_CSP_ENABLED=true

# File Upload Configuration
MAX_FILE_SIZE_MB=10
MAX_AUDIO_SIZE_MB=50
MAX_VIDEO_SIZE_MB=100
MAX_DOCUMENT_SIZE_MB=20

# Agenda Job Scheduler Configuration
AGENDA_COLLECTION_NAME=agendaJobs
AGENDA_PROCESS_EVERY=10 seconds
AGENDA_MAX_CONCURRENCY=10
AGENDA_DEFAULT_CONCURRENCY=5

# Performance Monitoring
ENABLE_PERFORMANCE_LOGGING=true
SLOW_QUERY_THRESHOLD_MS=1000
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000

# Health Check Configuration
HEALTH_CHECK_INTERVAL_MS=30000
DB_PING_TIMEOUT_MS=5000

# Logging Configuration
LOG_LEVEL=info
LOG_FILE_PATH=/var/log/etrainer/app.log
ENABLE_FILE_LOGGING=true
ENABLE_CONSOLE_LOGGING=true

# Load Balancer Configuration
LB_HEALTH_CHECK_PATH=/health
LB_TIMEOUT_MS=30000
LB_MAX_CONNECTIONS=1000

# Development Configuration (only for development)
# DEV_AUTO_RESTART=true
# DEV_CORS_ORIGIN=*
# DEV_ENABLE_MOCK_DATA=false
